<div class="container mt-4">
  <h1 class="page-title">Your Conversations</h1>
  <% @conversations.each do |conversation| %>
    <div class="mb-3">
      <% participants = conversation.users.reject { |u| u == current_user } %>
      <strong>With:</strong> <%= participants.map(&:email).join(", ") %>
      <!-- Trigger modal -->
      <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#conversationModal-<%= conversation.id %>">
        Open Chat
      </button>
      <!-- Render the conversation modal -->
      <%= render partial: "conversations/conversation_modal", locals: { conversation: conversation } %>
    </div>
  <% end %>
</div>

